CREATE TABLE `platecode` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `p1` char(10) NOT NULL DEFAULT '_',
  `p2` char(2) NOT NULL DEFAULT '__',
  `p3` char(2) NOT NULL DEFAULT '__',
  `p4` char(2) NOT NULL DEFAULT '__',
  `p5` char(2) NOT NULL DEFAULT '__',
  `p6` char(2) NOT NULL DEFAULT '__',
  `p7` char(2) NOT NULL DEFAULT '__',
  `p8` char(2) NOT NULL DEFAULT '__',
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_p1` (`p1`) USING BTREE,
  KEY `ip2` (`p2`) USING BTREE,
  KEY `ip3` (`p3`) USING BTREE,
  KEY `ip4` (`p4`) USING BTREE,
  KEY `ip5` (`p5`) USING BTREE,
  KEY `ip6` (`p6`) USING BTREE,
  KEY `ip7` (`p7`) USING BTREE,
  KEY `ip8` (`p8`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=gbk;

CREATE TABLE IF NOT EXISTS `traffic`(
  `id` int(20) unsigned NOT NULL AUTO_INCREMENT,
  `passtime` date NOT NULL DEFAULT '2010-01-01',
  `platecode_id` mediumint(8) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`,`passtime`),
  UNIQUE KEY `index_passtime` (`passtime`,`platecode_id`) USING BTREE,
  KEY `index_p_id` (`platecode_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=gbk
PARTITION BY RANGE (to_days(passtime))
(PARTITION p201405 VALUES LESS THAN (to_days('2014-06-01')) ENGINE = InnoDB,
 PARTITION p201406 VALUES LESS THAN (to_days('2014-07-01')) ENGINE = InnoDB,
 PARTITION p201407 VALUES LESS THAN (to_days('2014-08-01')) ENGINE = InnoDB,
 PARTITION p201408 VALUES LESS THAN (to_days('2014-09-01')) ENGINE = InnoDB,
 PARTITION p201409 VALUES LESS THAN (to_days('2014-10-01')) ENGINE = InnoDB,
 PARTITION p201410 VALUES LESS THAN (to_days('2014-11-01')) ENGINE = InnoDB,
 PARTITION p201411 VALUES LESS THAN (to_days('2014-12-01')) ENGINE = InnoDB,
 PARTITION p201412 VALUES LESS THAN (to_days('2015-01-01')) ENGINE = InnoDB,
 PARTITION p201501 VALUES LESS THAN (to_days('2015-02-01')) ENGINE = InnoDB,
 PARTITION p201502 VALUES LESS THAN (to_days('2015-03-01')) ENGINE = InnoDB,
 PARTITION p201503 VALUES LESS THAN (to_days('2015-04-01')) ENGINE = InnoDB,
 PARTITION p201504 VALUES LESS THAN (to_days('2015-05-01')) ENGINE = InnoDB,
 PARTITION p201505 VALUES LESS THAN (to_days('2015-06-01')) ENGINE = InnoDB,
 PARTITION p201506 VALUES LESS THAN (to_days('2015-07-01')) ENGINE = InnoDB,
 PARTITION p201507 VALUES LESS THAN (to_days('2015-08-01')) ENGINE = InnoDB,
 PARTITION p201508 VALUES LESS THAN (to_days('2015-09-01')) ENGINE = InnoDB,
 PARTITION p201509 VALUES LESS THAN (to_days('2015-10-01')) ENGINE = InnoDB,
 PARTITION p201510 VALUES LESS THAN (to_days('2015-11-01')) ENGINE = InnoDB,
 PARTITION p201511 VALUES LESS THAN (to_days('2015-12-01')) ENGINE = InnoDB,
 PARTITION p201512 VALUES LESS THAN (to_days('2016-01-01')) ENGINE = InnoDB,
 PARTITION pMAX VALUES LESS THAN MAXVALUE ENGINE = InnoDB);